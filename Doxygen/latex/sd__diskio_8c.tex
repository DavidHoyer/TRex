\hypertarget{sd__diskio_8c}{}\doxysection{C\+:/\+Users/\+Roth/\+STM32\+Cube\+IDE/workspace\+\_\+1.11.0/\+TRex/lib/hal/\+FATFS/\+Target/sd\+\_\+diskio.c File Reference}
\label{sd__diskio_8c}\index{C:/Users/Roth/STM32CubeIDE/workspace\_1.11.0/TRex/lib/hal/FATFS/Target/sd\_diskio.c@{C:/Users/Roth/STM32CubeIDE/workspace\_1.11.0/TRex/lib/hal/FATFS/Target/sd\_diskio.c}}


SD Disk I/O driver.  


{\ttfamily \#include \char`\"{}ff\+\_\+gen\+\_\+drv.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}sd\+\_\+diskio.\+h\char`\"{}}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{sd__diskio_8c_a28be5b4ad518f3d24d247e50f0385a9b}{SD\+\_\+\+TIMEOUT}}~30 $\ast$ 1000
\item 
\#define \mbox{\hyperlink{sd__diskio_8c_ae38517ff312078360458aa555211e1df}{SD\+\_\+\+DEFAULT\+\_\+\+BLOCK\+\_\+\+SIZE}}~512
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{diskio_8h_adba6790898ce4029c20a34b898ce73c1}{DSTATUS}} \mbox{\hyperlink{sd__diskio_8c_aad7ae36100f45de75e573a0f5fd3addd}{SD\+\_\+initialize}} (\mbox{\hyperlink{integer_8h_a4ae1dab0fb4b072a66584546209e7d58}{BYTE}} lun)
\begin{DoxyCompactList}\small\item\em Initializes a Drive. \end{DoxyCompactList}\item 
\mbox{\hyperlink{diskio_8h_adba6790898ce4029c20a34b898ce73c1}{DSTATUS}} \mbox{\hyperlink{sd__diskio_8c_a21ca54e56dca1f40b54f458ac35470e3}{SD\+\_\+status}} (\mbox{\hyperlink{integer_8h_a4ae1dab0fb4b072a66584546209e7d58}{BYTE}} lun)
\begin{DoxyCompactList}\small\item\em Gets Disk Status. \end{DoxyCompactList}\item 
\mbox{\hyperlink{diskio_8h_aacdfef1dad6565f65c26d12fe0ea4b2b}{DRESULT}} \mbox{\hyperlink{sd__diskio_8c_a1f2ee4a775d8a3877f368533db97cbe4}{SD\+\_\+read}} (\mbox{\hyperlink{integer_8h_a4ae1dab0fb4b072a66584546209e7d58}{BYTE}} lun, \mbox{\hyperlink{integer_8h_a4ae1dab0fb4b072a66584546209e7d58}{BYTE}} $\ast$buff, \mbox{\hyperlink{integer_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}} sector, \mbox{\hyperlink{integer_8h_a36cb3b01d81ffd844bbbfb54003e06ec}{UINT}} count)
\begin{DoxyCompactList}\small\item\em Reads Sector(s) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sd__diskio_8c_afc4f1ecdf361e0c0808803167f31d61b}{BSP\+\_\+\+SD\+\_\+\+Write\+Cplt\+Callback}} (void)
\begin{DoxyCompactList}\small\item\em Writes Sector(s) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sd__diskio_8c_a8d66ac35cee6a454f7e584f0051bc9f8}{BSP\+\_\+\+SD\+\_\+\+Read\+Cplt\+Callback}} (void)
\begin{DoxyCompactList}\small\item\em Rx Transfer completed callbacks. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const \mbox{\hyperlink{struct_diskio__drv_type_def}{Diskio\+\_\+drv\+Type\+Def}} \mbox{\hyperlink{sd__diskio_8c_a1a12762eb7b74c246045197fa41f1296}{SD\+\_\+\+Driver}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
SD Disk I/O driver. 

\begin{DoxyAttention}{Attention}

\end{DoxyAttention}
\doxysubsubsection*{\begin{center}\copyright{} Copyright (c) 2021 STMicroelectronics. All rights reserved.\end{center} }

This software component is licensed by ST under Ultimate Liberty license SLA0044, the \char`\"{}\+License\char`\"{}; You may not use this file except in compliance with the License. You may obtain a copy of the License at\+: www.\+st.\+com/\+SLA0044 

Definition in file \mbox{\hyperlink{sd__diskio_8c_source}{sd\+\_\+diskio.\+c}}.



\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{sd__diskio_8c_ae38517ff312078360458aa555211e1df}\label{sd__diskio_8c_ae38517ff312078360458aa555211e1df}} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_DEFAULT\_BLOCK\_SIZE@{SD\_DEFAULT\_BLOCK\_SIZE}}
\index{SD\_DEFAULT\_BLOCK\_SIZE@{SD\_DEFAULT\_BLOCK\_SIZE}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_DEFAULT\_BLOCK\_SIZE}{SD\_DEFAULT\_BLOCK\_SIZE}}
{\footnotesize\ttfamily \#define SD\+\_\+\+DEFAULT\+\_\+\+BLOCK\+\_\+\+SIZE~512}



Definition at line \mbox{\hyperlink{sd__diskio_8c_source_l00044}{44}} of file \mbox{\hyperlink{sd__diskio_8c_source}{sd\+\_\+diskio.\+c}}.

\mbox{\Hypertarget{sd__diskio_8c_a28be5b4ad518f3d24d247e50f0385a9b}\label{sd__diskio_8c_a28be5b4ad518f3d24d247e50f0385a9b}} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_TIMEOUT@{SD\_TIMEOUT}}
\index{SD\_TIMEOUT@{SD\_TIMEOUT}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_TIMEOUT}{SD\_TIMEOUT}}
{\footnotesize\ttfamily \#define SD\+\_\+\+TIMEOUT~30 $\ast$ 1000}



Definition at line \mbox{\hyperlink{sd__diskio_8c_source_l00042}{42}} of file \mbox{\hyperlink{sd__diskio_8c_source}{sd\+\_\+diskio.\+c}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{sd__diskio_8c_a8d66ac35cee6a454f7e584f0051bc9f8}\label{sd__diskio_8c_a8d66ac35cee6a454f7e584f0051bc9f8}} 
\index{sd\_diskio.c@{sd\_diskio.c}!BSP\_SD\_ReadCpltCallback@{BSP\_SD\_ReadCpltCallback}}
\index{BSP\_SD\_ReadCpltCallback@{BSP\_SD\_ReadCpltCallback}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{BSP\_SD\_ReadCpltCallback()}{BSP\_SD\_ReadCpltCallback()}}
{\footnotesize\ttfamily void BSP\+\_\+\+SD\+\_\+\+Read\+Cplt\+Callback (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Rx Transfer completed callbacks. 

BSP Rx Transfer completed callback.


\begin{DoxyParams}{Parameters}
{\em hsd} & SD handle \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{sd__diskio_8c_source_l00497}{497}} of file \mbox{\hyperlink{sd__diskio_8c_source}{sd\+\_\+diskio.\+c}}.

\mbox{\Hypertarget{sd__diskio_8c_afc4f1ecdf361e0c0808803167f31d61b}\label{sd__diskio_8c_afc4f1ecdf361e0c0808803167f31d61b}} 
\index{sd\_diskio.c@{sd\_diskio.c}!BSP\_SD\_WriteCpltCallback@{BSP\_SD\_WriteCpltCallback}}
\index{BSP\_SD\_WriteCpltCallback@{BSP\_SD\_WriteCpltCallback}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{BSP\_SD\_WriteCpltCallback()}{BSP\_SD\_WriteCpltCallback()}}
{\footnotesize\ttfamily void BSP\+\_\+\+SD\+\_\+\+Write\+Cplt\+Callback (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Writes Sector(s) 

BSP Tx Transfer completed callback.


\begin{DoxyParams}{Parameters}
{\em lun} & \+: not used \\
\hline
{\em $\ast$buff} & Data to be written \\
\hline
{\em sector} & Sector address (LBA) \\
\hline
{\em count} & Number of sectors to write (1..128) \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em DRESULT} & Operation result\\
\hline
\end{DoxyRetVals}
I/O control operation 
\begin{DoxyParams}{Parameters}
{\em lun} & \+: not used \\
\hline
{\em cmd} & Control code \\
\hline
{\em $\ast$buff} & Buffer to send/receive control data \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em DRESULT} & Operation result\\
\hline
\end{DoxyRetVals}
Tx Transfer completed callbacks 
\begin{DoxyParams}{Parameters}
{\em hsd} & SD handle \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{sd__diskio_8c_source_l00486}{486}} of file \mbox{\hyperlink{sd__diskio_8c_source}{sd\+\_\+diskio.\+c}}.

\mbox{\Hypertarget{sd__diskio_8c_aad7ae36100f45de75e573a0f5fd3addd}\label{sd__diskio_8c_aad7ae36100f45de75e573a0f5fd3addd}} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_initialize@{SD\_initialize}}
\index{SD\_initialize@{SD\_initialize}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_initialize()}{SD\_initialize()}}
{\footnotesize\ttfamily \mbox{\hyperlink{diskio_8h_adba6790898ce4029c20a34b898ce73c1}{DSTATUS}} SD\+\_\+initialize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{integer_8h_a4ae1dab0fb4b072a66584546209e7d58}{BYTE}}}]{lun }\end{DoxyParamCaption})}



Initializes a Drive. 


\begin{DoxyParams}{Parameters}
{\em lun} & \+: not used \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em DSTATUS} & Operation status \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{sd__diskio_8c_source_l00151}{151}} of file \mbox{\hyperlink{sd__diskio_8c_source}{sd\+\_\+diskio.\+c}}.

\mbox{\Hypertarget{sd__diskio_8c_a1f2ee4a775d8a3877f368533db97cbe4}\label{sd__diskio_8c_a1f2ee4a775d8a3877f368533db97cbe4}} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_read@{SD\_read}}
\index{SD\_read@{SD\_read}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_read()}{SD\_read()}}
{\footnotesize\ttfamily \mbox{\hyperlink{diskio_8h_aacdfef1dad6565f65c26d12fe0ea4b2b}{DRESULT}} SD\+\_\+read (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{integer_8h_a4ae1dab0fb4b072a66584546209e7d58}{BYTE}}}]{lun,  }\item[{\mbox{\hyperlink{integer_8h_a4ae1dab0fb4b072a66584546209e7d58}{BYTE}} $\ast$}]{buff,  }\item[{\mbox{\hyperlink{integer_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}}]{sector,  }\item[{\mbox{\hyperlink{integer_8h_a36cb3b01d81ffd844bbbfb54003e06ec}{UINT}}}]{count }\end{DoxyParamCaption})}



Reads Sector(s) 


\begin{DoxyParams}{Parameters}
{\em lun} & \+: not used \\
\hline
{\em $\ast$buff} & Data buffer to store read data \\
\hline
{\em sector} & Sector address (LBA) \\
\hline
{\em count} & Number of sectors to read (1..128) \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em DRESULT} & Operation result \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{sd__diskio_8c_source_l00190}{190}} of file \mbox{\hyperlink{sd__diskio_8c_source}{sd\+\_\+diskio.\+c}}.

\mbox{\Hypertarget{sd__diskio_8c_a21ca54e56dca1f40b54f458ac35470e3}\label{sd__diskio_8c_a21ca54e56dca1f40b54f458ac35470e3}} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_status@{SD\_status}}
\index{SD\_status@{SD\_status}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_status()}{SD\_status()}}
{\footnotesize\ttfamily \mbox{\hyperlink{diskio_8h_adba6790898ce4029c20a34b898ce73c1}{DSTATUS}} SD\+\_\+status (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{integer_8h_a4ae1dab0fb4b072a66584546209e7d58}{BYTE}}}]{lun }\end{DoxyParamCaption})}



Gets Disk Status. 


\begin{DoxyParams}{Parameters}
{\em lun} & \+: not used \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em DSTATUS} & Operation status \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{sd__diskio_8c_source_l00173}{173}} of file \mbox{\hyperlink{sd__diskio_8c_source}{sd\+\_\+diskio.\+c}}.



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{sd__diskio_8c_a1a12762eb7b74c246045197fa41f1296}\label{sd__diskio_8c_a1a12762eb7b74c246045197fa41f1296}} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_Driver@{SD\_Driver}}
\index{SD\_Driver@{SD\_Driver}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_Driver}{SD\_Driver}}
{\footnotesize\ttfamily const \mbox{\hyperlink{struct_diskio__drv_type_def}{Diskio\+\_\+drv\+Type\+Def}} SD\+\_\+\+Driver}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{sd__diskio_8c_aad7ae36100f45de75e573a0f5fd3addd}{SD\_initialize}},}
\DoxyCodeLine{\ \ \mbox{\hyperlink{sd__diskio_8c_a21ca54e56dca1f40b54f458ac35470e3}{SD\_status}},}
\DoxyCodeLine{\ \ \mbox{\hyperlink{sd__diskio_8c_a1f2ee4a775d8a3877f368533db97cbe4}{SD\_read}},}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{\ }
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{\ }
\DoxyCodeLine{\}}

\end{DoxyCode}


Definition at line \mbox{\hyperlink{sd__diskio_8c_source_l00099}{99}} of file \mbox{\hyperlink{sd__diskio_8c_source}{sd\+\_\+diskio.\+c}}.

