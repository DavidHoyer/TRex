\hypertarget{bsp__driver__sd_8c_source}{}\doxysection{bsp\+\_\+driver\+\_\+sd.\+c}
\label{bsp__driver__sd_8c_source}\index{C:/Users/Roth/STM32CubeIDE/workspace\_1.11.0/TRex/lib/hal/FATFS/Target/bsp\_driver\_sd.c@{C:/Users/Roth/STM32CubeIDE/workspace\_1.11.0/TRex/lib/hal/FATFS/Target/bsp\_driver\_sd.c}}
\mbox{\hyperlink{bsp__driver__sd_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00001}00001\ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ Header\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00024}00024\ \textcolor{comment}{/*\ USER\ CODE\ END\ Header\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00026}00026\ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ FirstSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00027}00027\ \textcolor{comment}{/*\ can\ be\ used\ to\ modify\ /\ undefine\ following\ code\ or\ add\ new\ definitions\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00028}00028\ \textcolor{comment}{/*\ USER\ CODE\ END\ FirstSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00029}00029\ \textcolor{comment}{/*\ Includes\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00030}00030\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bsp__driver__sd_8h}{bsp\_driver\_sd.h}}"{}}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00032}00032\ \textcolor{comment}{/*\ Extern\ variables\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00034}00034\ \textcolor{keyword}{extern}\ \mbox{\hyperlink{struct_s_d___handle_type_def}{SD\_HandleTypeDef}}\ \mbox{\hyperlink{bsp__driver__sd_8c_ad0b867cf724e111d6329c1eb91f3b30b}{hsd1}};}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00036}00036\ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ BeforeInitSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00037}00037\ \textcolor{comment}{/*\ can\ be\ used\ to\ modify\ /\ undefine\ following\ code\ or\ add\ code\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00038}00038\ \textcolor{comment}{/*\ USER\ CODE\ END\ BeforeInitSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00043}\mbox{\hyperlink{bsp__driver__sd_8c_afe208758d02f97e12c2eecbf604c1726}{00043}}\ \_\_weak\ uint8\_t\ \mbox{\hyperlink{bsp__driver__sd_8c_afe208758d02f97e12c2eecbf604c1726}{BSP\_SD\_Init}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00044}00044\ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00045}00045\ \ \ uint8\_t\ sd\_state\ =\ \mbox{\hyperlink{bsp__driver__sd_8h_a0486e06b5a59ffb7579cf6cb29037bc8}{MSD\_OK}};}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00046}00046\ \ \ \textcolor{comment}{/*\ Check\ if\ the\ SD\ card\ is\ plugged\ in\ the\ slot\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00047}00047\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{bsp__driver__sd_8c_a80c0a2c6722e29b76aa3e3d8a57ee27a}{BSP\_SD\_IsDetected}}()\ !=\ \mbox{\hyperlink{bsp__driver__sd_8h_a44beec2a536fb750d2401d7bb7c227b6}{SD\_PRESENT}})}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00048}00048\ \ \ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00049}00049\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{bsp__driver__sd_8h_af544b72de2dd084023a2106d78df7d96}{MSD\_ERROR\_SD\_NOT\_PRESENT}};}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00050}00050\ \ \ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00051}00051\ \ \ \textcolor{comment}{/*\ HAL\ SD\ initialization\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00052}00052\ \ \ sd\_state\ =\ \mbox{\hyperlink{group___s_d___exported___functions___group1_gae810ba97b6cdbcb565e09a2bff888540}{HAL\_SD\_Init}}(\&\mbox{\hyperlink{bsp__driver__sd_8c_ad0b867cf724e111d6329c1eb91f3b30b}{hsd1}});}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00053}00053\ \ \ \textcolor{comment}{/*\ Configure\ SD\ Bus\ width\ (4\ bits\ mode\ selected)\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00054}00054\ \ \ \textcolor{keywordflow}{if}\ (sd\_state\ ==\ \mbox{\hyperlink{bsp__driver__sd_8h_a0486e06b5a59ffb7579cf6cb29037bc8}{MSD\_OK}})}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00055}00055\ \ \ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00056}00056\ \ \ \ \ \textcolor{comment}{/*\ Enable\ wide\ operation\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00057}00057\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{group___s_d___exported___functions___group3_ga8395c55abfa691af95c004d1cb098323}{HAL\_SD\_ConfigWideBusOperation}}(\&\mbox{\hyperlink{bsp__driver__sd_8c_ad0b867cf724e111d6329c1eb91f3b30b}{hsd1}},\ \mbox{\hyperlink{group___s_d_m_m_c___l_l___bus___wide_gaa25a9139a839bab9f1fddaf02cde16be}{SDMMC\_BUS\_WIDE\_4B}})\ !=\ \mbox{\hyperlink{stm32h7xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa6eb724a07061d89a4a2052744e5a3632}{HAL\_OK}})}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00058}00058\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00059}00059\ \ \ \ \ \ \ sd\_state\ =\ \mbox{\hyperlink{bsp__driver__sd_8h_aa3fc6f6551d2bfd4524379e0c2526516}{MSD\_ERROR}};}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00060}00060\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00061}00061\ \ \ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00062}00062\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00063}00063\ \ \ \textcolor{keywordflow}{return}\ sd\_state;}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00064}00064\ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00065}00065\ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ AfterInitSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00066}00066\ \textcolor{comment}{/*\ can\ be\ used\ to\ modify\ previous\ code\ /\ undefine\ following\ code\ /\ add\ code\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00067}00067\ \textcolor{comment}{/*\ USER\ CODE\ END\ AfterInitSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00068}00068\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00069}00069\ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ InterruptMode\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00074}\mbox{\hyperlink{bsp__driver__sd_8c_aa1acca35f0ecac51c2afdf8458050f8b}{00074}}\ \_\_weak\ uint8\_t\ \mbox{\hyperlink{bsp__driver__sd_8c_aa1acca35f0ecac51c2afdf8458050f8b}{BSP\_SD\_ITConfig}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00075}00075\ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00076}00076\ \ \ \textcolor{comment}{/*\ Code\ to\ be\ updated\ by\ the\ user\ or\ replaced\ by\ one\ from\ the\ FW\ pack\ (in\ a\ stmxxxx\_sd.c\ file)\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00077}00077\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00078}00078\ \ \ \textcolor{keywordflow}{return}\ (uint8\_t)0;}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00079}00079\ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00080}00080\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00081}00081\ \textcolor{comment}{/*\ USER\ CODE\ END\ InterruptMode\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00082}00082\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00083}00083\ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ BeforeReadBlocksSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00084}00084\ \textcolor{comment}{/*\ can\ be\ used\ to\ modify\ previous\ code\ /\ undefine\ following\ code\ /\ add\ code\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00085}00085\ \textcolor{comment}{/*\ USER\ CODE\ END\ BeforeReadBlocksSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00094}\mbox{\hyperlink{bsp__driver__sd_8c_afe23f41939f1b8aa1f609fcf3e71be84}{00094}}\ \_\_weak\ uint8\_t\ \mbox{\hyperlink{bsp__driver__sd_8c_afe23f41939f1b8aa1f609fcf3e71be84}{BSP\_SD\_ReadBlocks}}(uint32\_t\ *pData,\ uint32\_t\ ReadAddr,\ uint32\_t\ NumOfBlocks,\ uint32\_t\ Timeout)}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00095}00095\ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00096}00096\ \ \ uint8\_t\ sd\_state\ =\ \mbox{\hyperlink{bsp__driver__sd_8h_a0486e06b5a59ffb7579cf6cb29037bc8}{MSD\_OK}};}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00098}00098\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{group___s_d___exported___functions___group2_ga57c9c8243514fc0e9834093b76f299db}{HAL\_SD\_ReadBlocks}}(\&\mbox{\hyperlink{bsp__driver__sd_8c_ad0b867cf724e111d6329c1eb91f3b30b}{hsd1}},\ (uint8\_t\ *)pData,\ ReadAddr,\ NumOfBlocks,\ Timeout)\ !=\ \mbox{\hyperlink{stm32h7xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa6eb724a07061d89a4a2052744e5a3632}{HAL\_OK}})}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00099}00099\ \ \ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00100}00100\ \ \ \ \ sd\_state\ =\ \mbox{\hyperlink{bsp__driver__sd_8h_aa3fc6f6551d2bfd4524379e0c2526516}{MSD\_ERROR}};}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00101}00101\ \ \ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00102}00102\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00103}00103\ \ \ \textcolor{keywordflow}{return}\ sd\_state;}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00104}00104\ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00105}00105\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00106}00106\ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ BeforeWriteBlocksSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00107}00107\ \textcolor{comment}{/*\ can\ be\ used\ to\ modify\ previous\ code\ /\ undefine\ following\ code\ /\ add\ code\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00108}00108\ \textcolor{comment}{/*\ USER\ CODE\ END\ BeforeWriteBlocksSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00117}\mbox{\hyperlink{bsp__driver__sd_8c_a6d88090464978ec87aa1cbca9f810495}{00117}}\ \_\_weak\ uint8\_t\ \mbox{\hyperlink{bsp__driver__sd_8c_a6d88090464978ec87aa1cbca9f810495}{BSP\_SD\_WriteBlocks}}(uint32\_t\ *pData,\ uint32\_t\ WriteAddr,\ uint32\_t\ NumOfBlocks,\ uint32\_t\ Timeout)}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00118}00118\ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00119}00119\ \ \ uint8\_t\ sd\_state\ =\ \mbox{\hyperlink{bsp__driver__sd_8h_a0486e06b5a59ffb7579cf6cb29037bc8}{MSD\_OK}};}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00121}00121\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{group___s_d___exported___functions___group2_gab2da788be2f14d72f9cfd4b9a647cf8c}{HAL\_SD\_WriteBlocks}}(\&\mbox{\hyperlink{bsp__driver__sd_8c_ad0b867cf724e111d6329c1eb91f3b30b}{hsd1}},\ (uint8\_t\ *)pData,\ WriteAddr,\ NumOfBlocks,\ Timeout)\ !=\ \mbox{\hyperlink{stm32h7xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa6eb724a07061d89a4a2052744e5a3632}{HAL\_OK}})}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00122}00122\ \ \ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00123}00123\ \ \ \ \ sd\_state\ =\ \mbox{\hyperlink{bsp__driver__sd_8h_aa3fc6f6551d2bfd4524379e0c2526516}{MSD\_ERROR}};}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00124}00124\ \ \ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00125}00125\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00126}00126\ \ \ \textcolor{keywordflow}{return}\ sd\_state;}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00127}00127\ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00128}00128\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00129}00129\ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ BeforeReadDMABlocksSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00130}00130\ \textcolor{comment}{/*\ can\ be\ used\ to\ modify\ previous\ code\ /\ undefine\ following\ code\ /\ add\ code\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00131}00131\ \textcolor{comment}{/*\ USER\ CODE\ END\ BeforeReadDMABlocksSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00139}\mbox{\hyperlink{bsp__driver__sd_8c_aa907652a44281179bcb9bc575e3e8709}{00139}}\ \_\_weak\ uint8\_t\ \mbox{\hyperlink{bsp__driver__sd_8c_aa907652a44281179bcb9bc575e3e8709}{BSP\_SD\_ReadBlocks\_DMA}}(uint32\_t\ *pData,\ uint32\_t\ ReadAddr,\ uint32\_t\ NumOfBlocks)}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00140}00140\ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00141}00141\ \ \ uint8\_t\ sd\_state\ =\ \mbox{\hyperlink{bsp__driver__sd_8h_a0486e06b5a59ffb7579cf6cb29037bc8}{MSD\_OK}};}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00142}00142\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00143}00143\ \ \ \textcolor{comment}{/*\ Read\ block(s)\ in\ DMA\ transfer\ mode\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00144}00144\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{group___s_d___exported___functions___group2_ga28918afbbec3039c3cef5ca52c923eb9}{HAL\_SD\_ReadBlocks\_DMA}}(\&\mbox{\hyperlink{bsp__driver__sd_8c_ad0b867cf724e111d6329c1eb91f3b30b}{hsd1}},\ (uint8\_t\ *)pData,\ ReadAddr,\ NumOfBlocks)\ !=\ \mbox{\hyperlink{stm32h7xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa6eb724a07061d89a4a2052744e5a3632}{HAL\_OK}})}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00145}00145\ \ \ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00146}00146\ \ \ \ \ sd\_state\ =\ \mbox{\hyperlink{bsp__driver__sd_8h_aa3fc6f6551d2bfd4524379e0c2526516}{MSD\_ERROR}};}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00147}00147\ \ \ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00148}00148\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00149}00149\ \ \ \textcolor{keywordflow}{return}\ sd\_state;}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00150}00150\ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00151}00151\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00152}00152\ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ BeforeWriteDMABlocksSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00153}00153\ \textcolor{comment}{/*\ can\ be\ used\ to\ modify\ previous\ code\ /\ undefine\ following\ code\ /\ add\ code\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00154}00154\ \textcolor{comment}{/*\ USER\ CODE\ END\ BeforeWriteDMABlocksSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00162}\mbox{\hyperlink{bsp__driver__sd_8c_af3e90e60fd1aa25bdbd57c4e7bd62558}{00162}}\ \_\_weak\ uint8\_t\ \mbox{\hyperlink{bsp__driver__sd_8c_af3e90e60fd1aa25bdbd57c4e7bd62558}{BSP\_SD\_WriteBlocks\_DMA}}(uint32\_t\ *pData,\ uint32\_t\ WriteAddr,\ uint32\_t\ NumOfBlocks)}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00163}00163\ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00164}00164\ \ \ uint8\_t\ sd\_state\ =\ \mbox{\hyperlink{bsp__driver__sd_8h_a0486e06b5a59ffb7579cf6cb29037bc8}{MSD\_OK}};}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00165}00165\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00166}00166\ \ \ \textcolor{comment}{/*\ Write\ block(s)\ in\ DMA\ transfer\ mode\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00167}00167\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{group___s_d___exported___functions___group2_gaf36737ac0370bcd8872f7c367e675b42}{HAL\_SD\_WriteBlocks\_DMA}}(\&\mbox{\hyperlink{bsp__driver__sd_8c_ad0b867cf724e111d6329c1eb91f3b30b}{hsd1}},\ (uint8\_t\ *)pData,\ WriteAddr,\ NumOfBlocks)\ !=\ \mbox{\hyperlink{stm32h7xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa6eb724a07061d89a4a2052744e5a3632}{HAL\_OK}})}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00168}00168\ \ \ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00169}00169\ \ \ \ \ sd\_state\ =\ \mbox{\hyperlink{bsp__driver__sd_8h_aa3fc6f6551d2bfd4524379e0c2526516}{MSD\_ERROR}};}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00170}00170\ \ \ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00171}00171\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00172}00172\ \ \ \textcolor{keywordflow}{return}\ sd\_state;}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00173}00173\ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00174}00174\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00175}00175\ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ BeforeEraseSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00176}00176\ \textcolor{comment}{/*\ can\ be\ used\ to\ modify\ previous\ code\ /\ undefine\ following\ code\ /\ add\ code\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00177}00177\ \textcolor{comment}{/*\ USER\ CODE\ END\ BeforeEraseSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00184}\mbox{\hyperlink{bsp__driver__sd_8c_aeaa35023e9428a9c31e693bcdadeb3d6}{00184}}\ \_\_weak\ uint8\_t\ \mbox{\hyperlink{bsp__driver__sd_8c_aeaa35023e9428a9c31e693bcdadeb3d6}{BSP\_SD\_Erase}}(uint32\_t\ StartAddr,\ uint32\_t\ EndAddr)}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00185}00185\ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00186}00186\ \ \ uint8\_t\ sd\_state\ =\ \mbox{\hyperlink{bsp__driver__sd_8h_a0486e06b5a59ffb7579cf6cb29037bc8}{MSD\_OK}};}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00187}00187\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00188}00188\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{group___s_d___exported___functions___group2_gac2173726606e9e3a3ffce50f21fe0c38}{HAL\_SD\_Erase}}(\&\mbox{\hyperlink{bsp__driver__sd_8c_ad0b867cf724e111d6329c1eb91f3b30b}{hsd1}},\ StartAddr,\ EndAddr)\ !=\ \mbox{\hyperlink{stm32h7xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa6eb724a07061d89a4a2052744e5a3632}{HAL\_OK}})}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00189}00189\ \ \ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00190}00190\ \ \ \ \ sd\_state\ =\ \mbox{\hyperlink{bsp__driver__sd_8h_aa3fc6f6551d2bfd4524379e0c2526516}{MSD\_ERROR}};}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00191}00191\ \ \ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00192}00192\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00193}00193\ \ \ \textcolor{keywordflow}{return}\ sd\_state;}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00194}00194\ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00195}00195\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00196}00196\ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ BeforeGetCardStateSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00197}00197\ \textcolor{comment}{/*\ can\ be\ used\ to\ modify\ previous\ code\ /\ undefine\ following\ code\ /\ add\ code\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00198}00198\ \textcolor{comment}{/*\ USER\ CODE\ END\ BeforeGetCardStateSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00199}00199\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00208}\mbox{\hyperlink{bsp__driver__sd_8c_ad7cfcf73b9f505d0675ec1c2516dbd4c}{00208}}\ \_\_weak\ uint8\_t\ \mbox{\hyperlink{bsp__driver__sd_8c_ad7cfcf73b9f505d0675ec1c2516dbd4c}{BSP\_SD\_GetCardState}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00209}00209\ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00210}00210\ \ \ \textcolor{keywordflow}{return}\ ((\mbox{\hyperlink{group___s_d___exported___functions___group4_ga61f65802034a18141e92ae669fdc844c}{HAL\_SD\_GetCardState}}(\&\mbox{\hyperlink{bsp__driver__sd_8c_ad0b867cf724e111d6329c1eb91f3b30b}{hsd1}})\ ==\ \mbox{\hyperlink{group___s_d___exported___types___group2_ga90b2baa72e42838f1287ffce0798b748}{HAL\_SD\_CARD\_TRANSFER}}\ )\ ?\ \mbox{\hyperlink{bsp__driver__sd_8h_ac5d3734fc73a394772363a2e88cf3aac}{SD\_TRANSFER\_OK}}\ :\ \mbox{\hyperlink{bsp__driver__sd_8h_a6c21d1c360457d0c9f035d325cc4adaf}{SD\_TRANSFER\_BUSY}});}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00211}00211\ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00212}00212\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00218}\mbox{\hyperlink{bsp__driver__sd_8c_a17b5e6325eebcd997d540f304d7a35b1}{00218}}\ \_\_weak\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{bsp__driver__sd_8c_a17b5e6325eebcd997d540f304d7a35b1}{BSP\_SD\_GetCardInfo}}(\mbox{\hyperlink{struct_h_a_l___s_d___card_info_type_def}{HAL\_SD\_CardInfoTypeDef}}\ *CardInfo)}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00219}00219\ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00220}00220\ \ \ \textcolor{comment}{/*\ Get\ SD\ card\ Information\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00221}00221\ \ \ \mbox{\hyperlink{group___s_d___exported___functions___group4_gab783bcbd433b03dd394308ec98e0fb88}{HAL\_SD\_GetCardInfo}}(\&\mbox{\hyperlink{bsp__driver__sd_8c_ad0b867cf724e111d6329c1eb91f3b30b}{hsd1}},\ CardInfo);}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00222}00222\ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00223}00223\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00224}00224\ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ BeforeCallBacksSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00225}00225\ \textcolor{comment}{/*\ can\ be\ used\ to\ modify\ previous\ code\ /\ undefine\ following\ code\ /\ add\ code\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00226}00226\ \textcolor{comment}{/*\ USER\ CODE\ END\ BeforeCallBacksSection\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00232}\mbox{\hyperlink{group___s_d___exported___functions___group2_ga52a463063ce8c6f1e8910f30dd4e8376}{00232}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___s_d___exported___functions___group2_ga52a463063ce8c6f1e8910f30dd4e8376}{HAL\_SD\_AbortCallback}}(\mbox{\hyperlink{struct_s_d___handle_type_def}{SD\_HandleTypeDef}}\ *hsd)}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00233}00233\ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00234}00234\ \ \ \mbox{\hyperlink{bsp__driver__sd_8c_a93d832f6829fdec979a7df3944084512}{BSP\_SD\_AbortCallback}}();}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00235}00235\ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00236}00236\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00242}\mbox{\hyperlink{group___s_d___exported___functions___group2_ga7f42b31026c697fea97c132e9aed15e2}{00242}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___s_d___exported___functions___group2_ga7f42b31026c697fea97c132e9aed15e2}{HAL\_SD\_TxCpltCallback}}(\mbox{\hyperlink{struct_s_d___handle_type_def}{SD\_HandleTypeDef}}\ *hsd)}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00243}00243\ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00244}00244\ \ \ \mbox{\hyperlink{bsp__driver__sd_8c_a2e6559fa7b5164071baafa3b3f668e3f}{BSP\_SD\_WriteCpltCallback}}();}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00245}00245\ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00246}00246\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00252}\mbox{\hyperlink{group___s_d___exported___functions___group2_ga1720dc3a0e88b26e557ae63fad3a382d}{00252}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___s_d___exported___functions___group2_ga1720dc3a0e88b26e557ae63fad3a382d}{HAL\_SD\_RxCpltCallback}}(\mbox{\hyperlink{struct_s_d___handle_type_def}{SD\_HandleTypeDef}}\ *hsd)}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00253}00253\ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00254}00254\ \ \ \mbox{\hyperlink{bsp__driver__sd_8c_aeb3eb4ab76f0acd225bddf68199e6f3c}{BSP\_SD\_ReadCpltCallback}}();}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00255}00255\ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00256}00256\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00257}00257\ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ CallBacksSection\_C\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00263}\mbox{\hyperlink{bsp__driver__sd_8c_a93d832f6829fdec979a7df3944084512}{00263}}\ \_\_weak\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{bsp__driver__sd_8c_a93d832f6829fdec979a7df3944084512}{BSP\_SD\_AbortCallback}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00264}00264\ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00265}00265\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00266}00266\ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00267}00267\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00273}\mbox{\hyperlink{bsp__driver__sd_8c_a2e6559fa7b5164071baafa3b3f668e3f}{00273}}\ \_\_weak\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{bsp__driver__sd_8c_a2e6559fa7b5164071baafa3b3f668e3f}{BSP\_SD\_WriteCpltCallback}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00274}00274\ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00275}00275\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00276}00276\ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00277}00277\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00283}\mbox{\hyperlink{bsp__driver__sd_8c_aeb3eb4ab76f0acd225bddf68199e6f3c}{00283}}\ \_\_weak\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{bsp__driver__sd_8c_aeb3eb4ab76f0acd225bddf68199e6f3c}{BSP\_SD\_ReadCpltCallback}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00284}00284\ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00285}00285\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00286}00286\ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00287}00287\ \textcolor{comment}{/*\ USER\ CODE\ END\ CallBacksSection\_C\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00288}00288\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00294}\mbox{\hyperlink{bsp__driver__sd_8c_a80c0a2c6722e29b76aa3e3d8a57ee27a}{00294}}\ \_\_weak\ uint8\_t\ \mbox{\hyperlink{bsp__driver__sd_8c_a80c0a2c6722e29b76aa3e3d8a57ee27a}{BSP\_SD\_IsDetected}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00295}00295\ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00296}00296\ \ \ \mbox{\hyperlink{core__armv81mml_8h_aec43007d9998a0a0e01faede4133d6be}{\_\_IO}}\ uint8\_t\ status\ =\ \mbox{\hyperlink{bsp__driver__sd_8h_a44beec2a536fb750d2401d7bb7c227b6}{SD\_PRESENT}};}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00297}00297\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00298}00298\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{fatfs__platform_8c_aa64443bad1703927b76af9ab0ddd443d}{BSP\_PlatformIsDetected}}()\ ==\ 0x0)}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00299}00299\ \ \ \{}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00300}00300\ \ \ \ \ status\ =\ \mbox{\hyperlink{bsp__driver__sd_8h_a342b72a630b1c5c90e2fd95c93dd686b}{SD\_NOT\_PRESENT}};}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00301}00301\ \ \ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00302}00302\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00303}00303\ \ \ \textcolor{keywordflow}{return}\ status;}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00304}00304\ \}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00305}00305\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00306}00306\ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ AdditionalCode\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00307}00307\ \textcolor{comment}{/*\ user\ code\ can\ be\ inserted\ here\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00308}00308\ \textcolor{comment}{/*\ USER\ CODE\ END\ AdditionalCode\ */}}
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00309}00309\ }
\DoxyCodeLine{\Hypertarget{bsp__driver__sd_8c_source_l00310}00310\ \textcolor{comment}{/************************\ (C)\ COPYRIGHT\ STMicroelectronics\ *****END\ OF\ FILE****/}}

\end{DoxyCode}
